<div class="card">
  <div class="card-header d-flex justify-between align-center">
    <h2 class="text-primary">Demandes de Tickets</h2>
    <div class="d-flex gap-2">
      <button class="btn btn-outline" (click)="loadTickets()">Rafra√Æchir</button>
    </div>
  </div>
  <div class="card-body">
    <div *ngIf="loading" class="text-secondary">Chargement...</div>
    <div *ngIf="error" class="text-danger">{{ error }}</div>

    <div *ngIf="tickets?.length; else empty">
      <div class="mission-list">
        <div class="mission-item" *ngFor="let t of tickets">
          <div class="mission-info">
            <div class="mission-title">{{ t.mission?.titre || 'Mission' }}</div>
            <div class="mission-meta">
              <span>
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                {{ t.mission?.dateDebut | date:'dd/MM/yyyy' }}
              </span>
              <span>
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                {{ t.mission?.lieuMission }}
              </span>
            </div>
          </div>
          <div class="d-flex gap-2">
            <button class="btn btn-secondary" (click)="requestJustifs(t)">Demander justificatifs</button>
            <button class="btn btn-danger" (click)="reject(t)">Rejeter</button>
            <button class="btn btn-primary" (click)="validate(t)">Valider</button>
          </div>
        </div>
      </div>
    </div>
    <ng-template #empty>
      <div class="empty-state">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline></svg>
        <p>Aucune demande pour le moment</p>
      </div>
    </ng-template>
  </div>
</div>
